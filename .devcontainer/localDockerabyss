FROM postgres:15

# Copy custom entrypoint if needed
COPY localentrypoint.sh /usr/local/bin/localentrypoint.sh
RUN chmod +x /usr/local/bin/localentrypoint.sh

# Expose only PostgreSQL port
EXPOSE 5432

ENV TINI_VERSION=v0.19.0
ADD https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini /tini
RUN chmod +x /tini

ENTRYPOINT ["/tini", "--"]
CMD ["/usr/local/bin/localentrypoint.sh"]
